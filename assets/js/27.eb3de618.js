(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{538:function(s,n,t){"use strict";t.r(n);var a=t(3),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"生成自签名证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成自签名证书"}},[s._v("#")]),s._v(" 生成自签名证书")]),s._v(" "),t("h2",{attrs:{id:"一、使用jdk自带的keytool工具生成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、使用jdk自带的keytool工具生成"}},[s._v("#")]),s._v(" 一、使用jdk自带的keytool工具生成")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("说明：")]),s._v(" "),t("ul",[t("li",[s._v("自签名的SSL证书，只能进行学习测试使用，不具备标准SSL证书相有的安全性，生产使用时，应该购买由CA机构颁发的证书。")])])]),s._v(" "),t("li",[t("p",[s._v("使用keytool工具，生成jks证书")]),s._v(" "),t("ul",[t("li",[s._v("该工具由jdk提供，所以一般tomcat、springboot等Java类程序，可以直接使用此类型证书，使用如下命令创建证书，用户名和密码我都设置的为hatech")])])])]),s._v(" "),t("div",{staticClass:"language-bat line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("C:\\Users\\20191110keytool -genkey -alias hatech -keyalg RSA -keystore D:\\\\cert\\\\hatech.jks\n输入密钥库口令:\n再次输入新口令:\n您的名字与姓氏是什么?\n  [Unknown]:\n您的组织单位名称是什么?\n  [Unknown]:\n您的组织名称是什么?\n  [Unknown]:\n您所在的城市或区域名称是什么?\n  [Unknown]:\n您所在的省/市/自治区名称是什么?\n  [Unknown]:\n该单位的双字母国家/地区代码是什么?\n  [Unknown]:\nCN=Unknown, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown, C=Unknown是否正确?\n  [否]:  y\n\n输入 &lt;hatech 的密钥口令\n        (如果和密钥库口令相同, 按回车):\n\nWarning:\nJKS 密钥库使用专用格式。建议使用 keytool -importkeystore -srckeystore D:\\\\cert\\\\hatech.jks -destkeystore D:\\\\cert\\\\hatech.jks -deststoretype pkcs12 迁移到行业标准格式 PKCS12。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("ul",[t("li",[s._v("这个时候keytool会提示建议转换为标准的PCKS12格式，所以也进行转换为.p12格式")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("C:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("20191110keytool -importkeystore -srckeystore D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("hatech.jks -destkeystore D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("hatech.p12 -deststoretype pkcs12\n正在将密钥库 D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("hatech.jks 导入到 D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("hatech.p12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n输入目标密钥库口令:\n再次输入新口令:\n输入源密钥库口令:\n已成功导入别名 hatech 的条目。\n已完成导入命令: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 个条目成功导入, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 个条目失败或取消\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("完成以后会在D盘cert文件夹中应该会有两个文件，一个是原始的hatech.jks文件，另一个则是标准化的hatech.p12文件")]),s._v(" "),t("h2",{attrs:{id:"二、将p12证书，转换为-crt和-key文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、将p12证书，转换为-crt和-key文件"}},[s._v("#")]),s._v(" 二、将p12证书，转换为.crt和.key文件")]),s._v(" "),t("ul",[t("li",[s._v("目前证书加密主要有两大类\n"),t("ul",[t("li",[s._v("一个是以java为主使用keytool工具生成的.jks文件")]),s._v(" "),t("li",[s._v("另一种是使用openssl为工具生成的.crt、.key等其它文件的证书，这些证书通常在非java程序上使用")])])]),s._v(" "),t("li",[s._v("由于nginx需要.crt和.key文件作为证书文件，所以需要进行转换\n"),t("ul",[t("li",[s._v("需要使用openssl工具")])])])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#生成.crt")]),s._v("\nC:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("20191110openssl pkcs12 -in D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("hatech.p12 -nokeys -clcerts -out D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("hatech.crt\nEnter Import Password:\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#生成.key")]),s._v("\nC:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("20191110openssl pkcs12 -in D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("hatech.p12 -nocerts -nodes -out D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("cert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("hatech.key\nEnter Import Password:\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看")]),s._v("\nD:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("certdir\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/12/21  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":26    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("lt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("DIR          "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/12/21  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":26    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("lt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("DIR          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/12/21  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":25             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1,577")]),s._v(" hatech.crt\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/12/21  09:51             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2,245")]),s._v(" hatech.jks\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/12/21  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":26             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1,883")]),s._v(" hatech.key\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("/12/21  09:55             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2,583")]),s._v(" hatech.p12\n               "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 个文件          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8,288")]),s._v(" 字节\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);